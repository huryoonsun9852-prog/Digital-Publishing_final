<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì²­ë…„ ì •ì±… í†µí•© íƒ€ì„ë¼ì¸</title>
    <!-- Chosen Palette: Calm Blue & Neutral Slate -->
    <!-- Application Structure Plan: A filter-first SPA with REAL DATA from Google Sheets. Users filter by 'Who' (status) and 'What' (category). Updates Dashboard, Timeline, and List views. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* ê¸°ë³¸ í°íŠ¸ ë° ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            -ms-overflow-style: none; /* IE and Edge */
            scrollbar-width: none; /* Firefox */
        }
        body::-webkit-scrollbar {
            display: none; /* Chrome, Safari, and Opera */
        }
        
        /* Chart.js ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 300px;
        }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            transition: opacity 0.25s ease, visibility 0.25s ease;
        }
        .modal-content {
            transition: transform 0.25s ease;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- ëª¨ë‹¬ (ì´ˆê¸° ìˆ¨ê¹€) -->
    <div id="modal" class="modal fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm opacity-0 invisible" onclick="closeModal()">
        <div class="modal-content bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden transform scale-95" onclick="event.stopPropagation()">
            <!-- ëª¨ë‹¬ í—¤ë” -->
            <div class="p-6 border-b flex justify-between items-start bg-slate-50/70">
                <div>
                    <div class="flex gap-2 mb-2">
                        <span id="modal-category" class="text-xs px-2 py-1 rounded font-bold"></span>
                        <span id="modal-dday" class="text-xs px-2 py-1 rounded font-bold"></span>
                    </div>
                    <h2 id="modal-title" class="text-xl font-bold text-slate-900 leading-tight"></h2>
                </div>
                <button onclick="closeModal()" class="p-1 hover:bg-slate-200 rounded-full transition-colors text-slate-500">&times;</button>
            </div>
            
            <!-- ëª¨ë‹¬ ë°”ë”” -->
            <div class="p-6 space-y-5 max-h-[60vh] overflow-y-auto">
                <div class="flex gap-4">
                    <div class="w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center flex-shrink-0">
                        <span class="text-blue-600">ğŸ‘¤</span>
                    </div>
                    <div>
                        <h4 class="text-sm font-bold text-slate-900">ì§€ì› ëŒ€ìƒ ë° ìê²©</h4>
                        <p id="modal-target" class="text-sm text-slate-600 mt-1"></p>
                        <p id="modal-age" class="text-xs text-slate-400 mt-1"></p>
                    </div>
                </div>
                <div class="flex gap-4">
                    <div class="w-8 h-8 rounded-full bg-green-50 flex items-center justify-center flex-shrink-0">
                        <span class="text-green-600">ğŸ—“ï¸</span>
                    </div>
                    <div>
                        <h4 class="text-sm font-bold text-slate-900">ì‹ ì²­ ê¸°ê°„</h4>
                        <p id="modal-period" class="text-sm text-slate-600 mt-1"></p>
                    </div>
                </div>
                <div class="flex gap-4">
                    <div class="w-8 h-8 rounded-full bg-orange-50 flex items-center justify-center flex-shrink-0">
                        <span class="text-orange-600">â„¹ï¸</span>
                    </div>
                    <div>
                        <h4 class="text-sm font-bold text-slate-900">ìƒì„¸ ë‚´ìš©</h4>
                        <p id="modal-desc" class="text-sm text-slate-600 mt-1 leading-relaxed whitespace-pre-line"></p>
                    </div>
                </div>
                <div class="flex gap-4">
                     <div class="w-8 h-8 rounded-full bg-purple-50 flex items-center justify-center flex-shrink-0">
                        <span class="text-purple-600">ğŸ¢</span>
                    </div>
                    <div>
                        <h4 class="text-sm font-bold text-slate-900">ì£¼ê´€ ê¸°ê´€</h4>
                        <p id="modal-dept" class="text-sm text-slate-600 mt-1"></p>
                    </div>
                </div>
            </div>

            <!-- ëª¨ë‹¬ í‘¸í„° -->
            <div class="p-4 border-t bg-slate-50 flex gap-3">
                <button onclick="closeModal()" class="flex-1 py-3 px-4 rounded-xl border bg-white font-medium text-slate-700 hover:bg-slate-100 transition-colors">ë‹«ê¸°</button>
                <a id="modal-link" href="#" target="_blank" rel="noreferrer" class="flex-1 py-3 px-4 rounded-xl bg-blue-600 text-white font-bold text-center hover:bg-blue-700 transition-colors">ìì„¸íˆ ë³´ê¸° &rarr;</a>
            </div>
        </div>
    </div>

    <!-- í—¤ë” -->
    <header class="bg-white border-b sticky top-0 z-10 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex flex-col md:flex-row justify-between md:items-center gap-4">
                <div>
                    <h1 class="text-2xl font-bold text-blue-600">ì²­ë…„ ì •ì±… í†µí•© íƒ€ì„ë¼ì¸</h1>
                    <p class="text-sm text-slate-500 mt-1">2025ë…„ ì „êµ­ ë‹¨ìœ„ ì²­ë…„ ì§€ì› ì‚¬ì—… ëª¨ì•„ë³´ê¸° (ì‹¤ì‹œê°„ ë°ì´í„° ë°˜ì˜)</p>
                </div>
                <!-- ë©”ì¸ ë„¤ë¹„ê²Œì´ì…˜ (ë·° ì „í™˜) -->
                <nav class="bg-slate-100 p-1 rounded-lg flex text-sm font-medium">
                    <button data-view="dashboard" class="nav-button flex-1 px-4 py-2 rounded-md transition-all bg-white shadow text-blue-600">ìš”ì•½</button>
                    <button data-view="timeline" class="nav-button flex-1 px-4 py-2 rounded-md transition-all text-slate-500">íƒ€ì„ë¼ì¸</button>
                    <button data-view="list" class="nav-button flex-1 px-4 py-2 rounded-md transition-all text-slate-500">ëª©ë¡ë³´ê¸°</button>
                </nav>
            </div>

            <!-- í•„í„° (í•µì‹¬ ì •ë³´ì¶•) -->
            <div class="mt-6 space-y-3">
                <!-- ì¶• 1: Who (ë‚´ ìƒíƒœ) -->
                <div class="flex items-center gap-2 flex-wrap">
                    <span class="text-sm font-bold text-slate-700 whitespace-nowrap mr-2">ğŸ‘¤ ë‚´ ìƒíƒœ:</span>
                    <button data-filter-group="status" data-filter-value="ì „ì²´" class="filter-button status-filter px-3 py-1.5 rounded-full text-sm border transition-colors bg-blue-600 text-white border-blue-600">ì „ì²´</button>
                    <button data-filter-group="status" data-filter-value="ì¬í•™ìƒ" class="filter-button status-filter px-3 py-1.5 rounded-full text-sm border transition-colors bg-white text-slate-600 border-slate-300 hover:bg-slate-50">ì¬í•™ìƒ</button>
                    <button data-filter-group="status" data-filter-value="ì¡¸ì—…ì˜ˆì •" class="filter-button status-filter px-3 py-1.5 rounded-full text-sm border transition-colors bg-white text-slate-600 border-slate-300 hover:bg-slate-50">ì¡¸ì—…ì˜ˆì •</button>
                    <button data-filter-group="status" data-filter-value="ì·¨ì¤€ìƒ" class="filter-button status-filter px-3 py-1.5 rounded-full text-sm border transition-colors bg-white text-slate-600 border-slate-300 hover:bg-slate-50">ì·¨ì¤€ìƒ(ë¯¸ì·¨ì—…)</button>
                    <button data-filter-group="status" data-filter-value="ì‚¬íšŒì´ˆë…„ìƒ" class="filter-button status-filter px-3 py-1.5 rounded-full text-sm border transition-colors bg-white text-slate-600 border-slate-300 hover:bg-slate-50">ì‚¬íšŒì´ˆë…„ìƒ(ì¬ì§ì)</button>
                </div>
                <!-- ì¶• 2: What (ê´€ì‹¬ ë¶„ì•¼) -->
                <div class="flex items-center gap-2 flex-wrap">
                    <span class="text-sm font-bold text-slate-700 whitespace-nowrap mr-2">ğŸ¯ ê´€ì‹¬ ë¶„ì•¼:</span>
                    <button data-filter-group="category" data-filter-value="ì „ì²´" class="filter-button category-filter px-3 py-1.5 rounded-full text-sm border transition-colors bg-slate-800 text-white border-slate-800">ì „ì²´</button>
                    <button data-filter-group="category" data-filter-value="ì·¨ì—…/ì§ë¬´" class="filter-button category-filter px-3 py-1.5 rounded-full text-sm border transition-colors bg-white text-slate-600 border-slate-300 hover:bg-slate-50">ì·¨ì—…/ì§ë¬´</button>
                    <button data-filter-group="category" data-filter-value="êµìœ¡/ì¥í•™" class="filter-button category-filter px-3 py-1.5 rounded-full text-sm border transition-colors bg-white text-slate-600 border-slate-300 hover:bg-slate-50">êµìœ¡/ì¥í•™</button>
                    <button data-filter-group="category" data-filter-value="ì£¼ê±°/ê¸ˆìœµ" class="filter-button category-filter px-3 py-1.5 rounded-full text-sm border transition-colors bg-white text-slate-600 border-slate-300 hover:bg-slate-50">ì£¼ê±°/ê¸ˆìœµ</button>
                    <button data-filter-group="category" data-filter-value="ìƒí™œ/ë³µì§€" class="filter-button category-filter px-3 py-1.5 rounded-full text-sm border transition-colors bg-white text-slate-600 border-slate-300 hover:bg-slate-50">ìƒí™œ/ë³µì§€</button>
                </div>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- ë·° 1: ëŒ€ì‹œë³´ë“œ (ìš”ì•½) -->
        <section id="view-dashboard" class="app-view">
            <div class="mb-6 bg-blue-50/70 border border-blue-100 rounded-lg p-4">
                <h3 class="text-sm font-bold text-blue-800">ìš”ì•½ ëŒ€ì‹œë³´ë“œ</h3>
                <p class="text-xs text-blue-600 mt-1">
                    ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì—ì„œ ë¶ˆëŸ¬ì˜¨ <span id="stat-total-text" class="font-bold"></span>ê°œì˜ ì •ì±…ì„ ë¶„ì„í•œ ê²°ê³¼ì…ë‹ˆë‹¤.
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- í†µê³„ ì¹´ë“œ -->
                <div class="bg-white p-6 rounded-xl shadow-sm border col-span-1 flex flex-col justify-center">
                    <span class="text-sm font-medium text-slate-500">ì´ ì •ì±… ìˆ˜</span>
                    <span id="stat-total" class="text-4xl font-bold text-blue-600 mt-2">0</span>
                    <span class="text-sm text-slate-400 mt-1">ê°œì˜ ì •ì±…ì´ ìˆìŠµë‹ˆë‹¤.</span>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border col-span-1 flex flex-col justify-center">
                    <span class="text-sm font-medium text-slate-500">ì§€ê¸ˆ ì‹ ì²­ ê°€ëŠ¥ (ìƒì‹œ í¬í•¨)</span>
                    <span id="stat-available" class="text-4xl font-bold text-green-600 mt-2">0</span>
                    <span class="text-sm text-slate-400 mt-1">ê°œì˜ ì •ì±…ì´ ì ‘ìˆ˜ ì¤‘ì…ë‹ˆë‹¤.</span>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border col-span-1 flex flex-col justify-center">
                    <span class="text-sm font-medium text-slate-500">ì£¼ëª©í•  ì •ì±…</span>
                    <span id="stat-important" class="text-4xl font-bold text-purple-600 mt-2">0</span>
                    <span class="text-sm text-slate-400 mt-1">ê°œì˜ í•µì‹¬ ì •ì±…ì´ ìˆìŠµë‹ˆë‹¤.</span>
                </div>

                <!-- Chart.js ì°¨íŠ¸ -->
                <div class="bg-white p-6 rounded-xl shadow-sm border md:col-span-3">
                    <h3 class="text-lg font-bold text-center mb-4">ë¶„ì•¼ë³„ ì •ì±… ë¶„í¬</h3>
                    <div class="chart-container">
                        <canvas id="categoryChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- ë·° 2: íƒ€ì„ë¼ì¸ (Gantt) -->
        <section id="view-timeline" class="app-view hidden">
            <div class="mb-6 bg-blue-50/70 border border-blue-100 rounded-lg p-4">
                <h3 class="text-sm font-bold text-blue-800">2025ë…„ ì—°ê°„ íƒ€ì„ë¼ì¸</h3>
                <p class="text-xs text-blue-600 mt-1">
                    ì •ì±… ë§‰ëŒ€ë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸ ë‚´ìš©ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°€ë¡œë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬ ì „ì²´ ê¸°ê°„ì„ í™•ì¸í•˜ì„¸ìš”.
                </p>
            </div>
            
            <div class="bg-white rounded-xl shadow-sm border overflow-hidden">
                <!-- ì›” í—¤ë” -->
                <div class="flex border-b bg-slate-50 text-xs font-bold text-slate-500 sticky top-[218px] md:top-[194px] z-[5]">
                    {[...Array(12)].map((_, i) => `<div class="flex-1 py-2 text-center border-r last:border-r-0 min-w-[80px]">${i+1}ì›”</div>`).join('')}
                </div>
                
                <!-- íƒ€ì„ë¼ì¸ ë°”ë”” -->
                <div id="timeline-body" class="relative p-4 overflow-x-auto min-h-[600px]">
                    <!-- ë°°ê²½ ê·¸ë¦¬ë“œ -->
                    <div class="absolute inset-0 flex pointer-events-none top-0">
                        {[...Array(12)].map((_, i) => `<div class="flex-1 border-r border-dashed border-slate-100 last:border-r-0 min-w-[80px] h-full"></div>`).join('')}
                    </div>
                    
                    <!-- ì˜¤ëŠ˜ ë‚ ì§œì„  -->
                    <div id="today-line" class="absolute top-0 bottom-0 w-0.5 bg-red-500 z-0 pointer-events-none">
                        <div class="absolute -top-1 -translate-x-1/2 bg-red-500 text-white text-[10px] px-1 rounded">Today</div>
                    </div>
                    
                    <!-- ì •ì±… ë§‰ëŒ€ ë Œë”ë§ ì˜ì—­ -->
                    <div id="timeline-bars" class="space-y-3 relative z-0 mt-2">
                        <!-- JSë¡œ ë Œë”ë§ -->
                    </div>
                </div>
            </div>
        </section>

        <!-- ë·° 3: ëª©ë¡ë³´ê¸° (ì¹´ë“œ) -->
        <section id="view-list" class="app-view hidden">
            <div class="mb-6 bg-blue-50/70 border border-blue-100 rounded-lg p-4">
                <h3 class="text-sm font-bold text-blue-800">ì •ì±… ëª©ë¡ ë³´ê¸°</h3>
                <p class="text-xs text-blue-600 mt-1">
                    í•„í„°ë§ëœ ì „ì²´ ì •ì±… ëª©ë¡ì…ë‹ˆë‹¤. ì¹´ë“œë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸ ë‚´ìš©ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>

            <div id="policy-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
                <!-- JSë¡œ ë Œë”ë§ -->
            </div>
        </section>

    </main>

    <script>
        // --- 1. ì‹¤ì œ ë°ì´í„° (Google Sheet ë‚´ìš© ë°˜ì˜) ---
        const policies = [
            // êµìœ¡/ì¥í•™
            { id: 101, title: "ì¸ê³µì§€ëŠ¥ëŒ€í•™ì› ì§€ì›", category: "êµìœ¡/ì¥í•™", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì¡¸ì—…ìƒ", "ëŒ€í•™ì›ìƒ"], desc: "ì¸ê³µì§€ëŠ¥ ì‚°ì—…ìœµí•© ì§‘ì ë‹¨ì§€ì— í•„ìš”í•œ ê³ ê¸‰ì¸ì¬ ì–‘ì„±. AIë°˜ë„ì²´ê³¼, ì¸ê³µì§€ëŠ¥ êµìœ¡.", dept: "AIë°˜ë„ì²´ê³¼", important: false },
            { id: 102, title: "ì •ë³´ë³´í˜¸ íŠ¹ì„±í™” ëŒ€í•™ ì§€ì›", category: "êµìœ¡/ì¥í•™", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì¬í•™ìƒ"], desc: "ë””ì§€í„¸ì „í™˜ ëŒ€ë¹„, ìš°ë¦¬ì§€ì—­ AIê¸°ë°˜ ì •ë³´ë³´í˜¸ ì¸ì¬ì–‘ì„±.", dept: "AIë°˜ë„ì²´ê³¼", important: false },
            { id: 121, title: "ì§ì—…ì‹¬ë¦¬ê²€ì‚¬", category: "êµìœ¡/ì¥í•™", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì¬í•™ìƒ", "ì·¨ì¤€ìƒ", "ì „ì²´"], desc: "ê°œì¸ì˜ ëŠ¥ë ¥ê³¼ í¥ë¯¸, ì„±ê²© ë“±ì„ ì¸¡ì •í•˜ì—¬ ì í•©í•œ ì§ì—… íƒìƒ‰ ì§€ì›.", dept: "ê³ ìš©ë…¸ë™ë¶€", important: false },

            // ì·¨ì—…/ì§ë¬´ (ì¼ìë¦¬)
            { id: 201, title: "ë°©ìœ„ì‚°ì—… ì „ë¬¸ì¸ë ¥ ì–‘ì„± ì§€ì›ì‚¬ì—…", category: "ì·¨ì—…/ì§ë¬´", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì¬í•™ìƒ", "ì¡¸ì—…ìƒ", "ì„ë°•ì‚¬"], desc: "ë°©ìœ„ì‚°ì—… í˜„ì¥ì˜ ìˆ˜ìš”ì— ê¸°ë°˜í•œ ì „ë¬¸ì¸ë ¥ ì–‘ì„± ë° ì¼ìë¦¬ ì°½ì¶œ ì§€ì›.", dept: "ë°©ìœ„ì‚¬ì—…ì²­", important: false },
            { id: 202, title: "ì²­ë…„ì¼ìë¦¬ ë„ì•½ì¥ë ¤ê¸ˆ", category: "ì·¨ì—…/ì§ë¬´", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì·¨ì¤€ìƒ", "ë¯¸ì·¨ì—…"], desc: "ì¤‘ì†Œê¸°ì—…ì—ì„œ ì·¨ì—…ì• ë¡œì²­ë…„ì„ ì •ê·œì§ìœ¼ë¡œ ì±„ìš©í•˜ê³  6ê°œì›” ì´ìƒ ê³ ìš©ìœ ì§€ì‹œ ê¸°ì—…ì§€ì›ê¸ˆ ì§€ê¸‰.", dept: "ê³ ìš©ë…¸ë™ë¶€", important: true },
            { id: 203, title: "êµ­ë¯¼ë‚´ì¼ë°°ì›€ì¹´ë“œ", category: "ì·¨ì—…/ì§ë¬´", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì¬í•™ìƒ", "ì·¨ì¤€ìƒ", "ì¬ì§ì", "ì „ì²´"], desc: "1ì¸ë‹¹ 300~500ë§Œì› í›ˆë ¨ë¹„ ì§€ì›. ì¡¸ì—…ì˜ˆì •ì, êµ¬ì§ì, ì¬ì§ì ë“± ëˆ„êµ¬ë‚˜ ì‹ ì²­ ê°€ëŠ¥.", dept: "ê³ ìš©ë…¸ë™ë¶€", important: true },
            { id: 204, title: "êµ­ë¯¼ì·¨ì—…ì§€ì›ì œë„", category: "ì·¨ì—…/ì§ë¬´", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì·¨ì¤€ìƒ", "ë¯¸ì·¨ì—…"], desc: "ì·¨ì—…ì§€ì›ì„œë¹„ìŠ¤ì™€ ì†Œë“ì§€ì›(êµ¬ì§ì´‰ì§„ìˆ˜ë‹¹)ì„ ê²°í•©í•˜ì—¬ ì œê³µí•˜ëŠ” í•œêµ­í˜• ì‹¤ì—…ë¶€ì¡°.", dept: "ê³ ìš©ë…¸ë™ë¶€", important: true },
            { id: 205, title: "ì²­ë…„ë„ì „ì§€ì›ì‚¬ì—…", category: "ì·¨ì—…/ì§ë¬´", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì·¨ì¤€ìƒ", "ë¯¸ì·¨ì—…", "êµ¬ì§ë‹¨ë…"], desc: "ë‹¨ê¸°(5ì£¼), ì¤‘ê¸°(15ì£¼), ì¥ê¸°(25ì£¼) í”„ë¡œê·¸ë¨ ì°¸ì—¬ ì‹œ ì°¸ì—¬ìˆ˜ë‹¹ ë° ì¸ì„¼í‹°ë¸Œ ì§€ê¸‰ (ìµœëŒ€ 300ë§Œì› ì´ìƒ).", dept: "ê³ ìš©ë…¸ë™ë¶€", important: true },
            { id: 206, title: "ì²­ë…„ êµ­ê°€ê¸°ìˆ ìê²©ì‹œí—˜ ì‘ì‹œë£Œ ì§€ì›", category: "ì·¨ì—…/ì§ë¬´", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì¬í•™ìƒ", "ì·¨ì¤€ìƒ", "ì‚¬íšŒì´ˆë…„ìƒ", "ì „ì²´"], desc: "34ì„¸ ì´í•˜ ì²­ë…„ ëŒ€ìƒ êµ­ê°€ê¸°ìˆ ìê²© ì‹œí—˜ ì‘ì‹œë£Œ 50% ì„  ì§€ì› (ì—° 3íšŒ í•œë„).", dept: "ê³ ìš©ë…¸ë™ë¶€", important: true },
            { id: 207, title: "í•´ì™¸ì¼ê²½í—˜ ì§€ì›ì‚¬ì—…(WELL)", category: "ì·¨ì—…/ì§ë¬´", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì¬í•™ìƒ", "ì¡¸ì—…ìƒ", "ì·¨ì¤€ìƒ"], desc: "ì§ë¬´ì†Œì–‘êµìœ¡ í›„ í•´ì™¸ í˜„ì§€ ì¼ê²½í—˜(2~4ê°œì›”) ê¸°íšŒ ì œê³µ. ì²´ì¬ë¹„ ë° êµ­ê°€ë³„ ì§€ì›ê¸ˆ ì§€ê¸‰.", dept: "ê³ ìš©ë…¸ë™ë¶€", important: false },
            { id: 208, title: "ë¯¸ë˜ë‚´ì¼ ì¼ê²½í—˜ ì‚¬ì—…", category: "ì·¨ì—…/ì§ë¬´", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì¬í•™ìƒ", "ì·¨ì¤€ìƒ"], desc: "ê¸°ì—…íƒë°©í˜•, í”„ë¡œì íŠ¸í˜•, ì¸í„´í˜•, ESGì§€ì›í˜• ë“± ë‹¤ì–‘í•œ ì¼ê²½í—˜ í”„ë¡œê·¸ë¨ ì œê³µ ë° ìˆ˜ë‹¹ ì§€ê¸‰.", dept: "ê³ ìš©ë…¸ë™ë¶€", important: true },
            { id: 209, title: "TIPS(íŒìŠ¤) í”„ë¡œê·¸ë¨", category: "ì·¨ì—…/ì§ë¬´", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì˜ˆë¹„ì°½ì—…ì", "ì°½ì—…ê°€"], desc: "ë¯¼ê°„ì´ ë°œêµ´í•œ ìœ ë§ ê¸°ìˆ ì°½ì—…ê¸°ì—… ì§€ì› (R&D, ì°½ì—…ì‚¬ì—…í™” ìê¸ˆ ë“±).", dept: "ì¤‘ì†Œë²¤ì²˜ê¸°ì—…ë¶€", important: false },
            { id: 210, title: "ì²­ë…„ì°½ì—…ê¸°ì—… ë³´ì¦", category: "ì·¨ì—…/ì§ë¬´", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì˜ˆë¹„ì°½ì—…ì", "ì´ˆê¸°ì°½ì—…ì"], desc: "ì²­ë…„ì°½ì—…ê¸°ì—…ì— ëŒ€í•œ ë³´ì¦ë£Œ ê°ë©´, ë³´ì¦ë¹„ìœ¨ ìƒí–¥ ë“± ìš°ëŒ€ í˜œíƒ.", dept: "ì¤‘ì†Œë²¤ì²˜ê¸°ì—…ë¶€", important: false },
            { id: 211, title: "K-Move ìŠ¤ì¿¨", category: "ì·¨ì—…/ì§ë¬´", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì·¨ì¤€ìƒ", "ì¡¸ì—…ìƒ"], desc: "í•´ì™¸ì·¨ì—…ì„ í¬ë§í•˜ëŠ” ì²­ë…„ì—ê²Œ ì–´í•™ ë° ì§ë¬´ êµìœ¡ ì œê³µ (ì—°ìˆ˜ë¹„ êµ­ë¹„ ì§€ì›).", dept: "ê³ ìš©ë…¸ë™ë¶€", important: false },
            { id: 212, title: "ëŒ€í•™ì¼ìë¦¬í”ŒëŸ¬ìŠ¤ì„¼í„°", category: "ì·¨ì—…/ì§ë¬´", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì¬í•™ìƒ", "ì¡¸ì—…ìƒ"], desc: "ì§„ë¡œ/ì·¨ì—… ìƒë‹´, í”„ë¡œê·¸ë¨ ì°¸ì—¬, ì¼ìë¦¬ ë§¤ì¹­ ë“± ì›ìŠ¤í†± ê³ ìš©ì„œë¹„ìŠ¤ ì œê³µ.", dept: "ê³ ìš©ë…¸ë™ë¶€", important: false },
            { id: 213, title: "K-ë””ì§€í„¸ íŠ¸ë ˆì´ë‹", category: "ì·¨ì—…/ì§ë¬´", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì·¨ì¤€ìƒ", "ì¡¸ì—…ì˜ˆì •", "ë¯¸ì·¨ì—…"], desc: "ì²¨ë‹¨ì‚°ì—…/ë””ì§€í„¸ í•µì‹¬ ì‹¤ë¬´ì¸ì¬ ì–‘ì„±í›ˆë ¨. í›ˆë ¨ë¹„ ì „ì•¡ ì§€ì› ë° í›ˆë ¨ìˆ˜ë‹¹ ì§€ê¸‰.", dept: "ê³ ìš©ë…¸ë™ë¶€", important: true },

            // ì£¼ê±°/ê¸ˆìœµ
            { id: 301, title: "ì²­ë…„ì£¼íƒë“œë¦¼ì²­ì•½í†µì¥", category: "ì£¼ê±°/ê¸ˆìœµ", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì‚¬íšŒì´ˆë…„ìƒ", "ì¬í•™ìƒ", "ì·¨ì¤€ìƒ", "ë¬´ì£¼íƒ"], desc: "ìµœëŒ€ 4.5% ì´ììœ¨, ì²­ì•½ ë‹¹ì²¨ ì‹œ ë¶„ì–‘ê°€ 80%ê¹Œì§€ ìµœì € 2.2% ì €ê¸ˆë¦¬ ëŒ€ì¶œ ì—°ê³„.", dept: "êµ­í† êµí†µë¶€", important: true },
            { id: 302, title: "ì²­ë…„ ì£¼íƒë“œë¦¼ ë””ë”¤ëŒ ëŒ€ì¶œ", category: "ì£¼ê±°/ê¸ˆìœµ", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì‚¬íšŒì´ˆë…„ìƒ", "ë¬´ì£¼íƒ"], desc: "ì²­ë…„ ì „ìš© ì£¼íƒë‹´ë³´ëŒ€ì¶œ. ìµœì € 2.4% ê¸ˆë¦¬, ìµœì¥ 40ë…„ ë§Œê¸°.", dept: "êµ­í† êµí†µë¶€", important: true },
            { id: 303, title: "ìƒí™œì•ˆì •ìê¸ˆ ìœµìì‚¬ì—…", category: "ì£¼ê±°/ê¸ˆìœµ", startDate: "2025-01-06", endDate: "2025-12-31", target: ["ì‚¬íšŒì´ˆë…„ìƒ", "ì¬ì§ì"], desc: "ì˜ë£Œë¹„, í˜¼ë¡€ë¹„, ë¶€ëª¨ìš”ì–‘ë¹„ ë“± ì €ë¦¬ ìœµì (ì—° 1.5%).", dept: "ê³ ìš©ë…¸ë™ë¶€", important: false },
            { id: 304, title: "ì²­ë…„ì „ìš©ì°½ì—…ìê¸ˆ", category: "ì£¼ê±°/ê¸ˆìœµ", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì˜ˆë¹„ì°½ì—…ì", "ì´ˆê¸°ì°½ì—…ì"], desc: "ì‹ ìš©/ë‹´ë³´ë ¥ì´ ë¶€ì¡±í•œ ì²­ë…„ ì°½ì—…ê°€ ëŒ€ìƒ ì €ë¦¬ ìœµì ì§€ì›.", dept: "ì¤‘ì†Œë²¤ì²˜ê¸°ì—…ë¶€", important: false },
            { id: 305, title: "ì²­ë…„ ì±„ë¬´ì¡°ì • ì œê³µ", category: "ì£¼ê±°/ê¸ˆìœµ", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì·¨ì¤€ìƒ", "ëŒ€í•™ìƒ", "ì‚¬íšŒì´ˆë…„ìƒ"], desc: "ì—°ì²´ ê¸°ê°„ì— ë”°ë¥¸ ì´ì ê°ë©´, ìƒí™˜ ìœ ì˜ˆ ë“± ì±„ë¬´ì¡°ì • ì§€ì›.", dept: "ê¸ˆìœµìœ„ì›íšŒ", important: false },
            
            // ìƒí™œ/ë³µì§€
            { id: 401, title: "ì²­ë…„ 1ì¸ê°€êµ¬ ì‚¬íšŒì ê´€ê³„ë§ í˜•ì„±ì§€ì›", category: "ìƒí™œ/ë³µì§€", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì „ì²´", "1ì¸ê°€êµ¬"], desc: "ê°€ì¡±ì„¼í„° ì¤‘ì‹¬ìœ¼ë¡œ ì²­ë…„ 1ì¸ê°€êµ¬ì˜ ê³ ë…/ê³ ë¦½ ë°©ì§€ í”„ë¡œê·¸ë¨ ì§€ì›.", dept: "ê°€ì¡±ì •ì±…ê³¼", important: false },
            { id: 402, title: "ì²­ë…„ì„±ì¥í”„ë¡œì íŠ¸(ì²­ë…„ì¹´í˜)", category: "ìƒí™œ/ë³µì§€", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ë¯¸ì·¨ì—…", "ì·¨ì¤€ìƒ"], desc: "ì²­ë…„ì¹´í˜ ê³µê°„ ë¬´ë£Œ ì´ìš©, ì‹¬ë¦¬ìƒë‹´, ê²½ë ¥ì„¤ê³„ í”„ë¡œê·¸ë¨ ë“± ì§€ì›.", dept: "ê³ ìš©ë…¸ë™ë¶€", important: false },
            { id: 403, title: "ì²­ë…„ ìì‚°í˜•ì„± ì§€ì›(ì²­ë…„ë„ì•½ê³„ì¢Œ)", category: "ìƒí™œ/ë³µì§€", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì‚¬íšŒì´ˆë…„ìƒ", "ì•Œë°”ìƒ", "ì·¨ì¤€ìƒ"], desc: "5ë…„ ë§Œê¸° ì‹œ ìµœëŒ€ 5,000ë§Œì› ëª©ëˆ ë§ˆë ¨. ì •ë¶€ê¸°ì—¬ê¸ˆ ë§¤ì¹­ ë° ë¹„ê³¼ì„¸ í˜œíƒ.", dept: "ê¸ˆìœµìœ„ì›íšŒ", important: true },
            { id: 404, title: "2025ë…„ ì „êµ­ë¯¼ë§ˆìŒíˆ¬ìì§€ì›ì‚¬ì—…", category: "ìƒí™œ/ë³µì§€", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì „ì²´"], desc: "ì „ë¬¸ ì‹¬ë¦¬ìƒë‹´ ì„œë¹„ìŠ¤ ë°”ìš°ì²˜ ì´ 8íšŒ ì œê³µ.", dept: "ë³´ê±´ë³µì§€ë¶€", important: false },
            { id: 405, title: "ìœ ì—”ìì›ë´‰ì‚¬ë‹¨(UNV) íŒŒê²¬", category: "ìƒí™œ/ë³µì§€", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ëŒ€ì¡¸", "ì¡¸ì—…ìƒ", "ì „ë¬¸ì§"], desc: "êµ­ì œê¸°êµ¬ í˜„ì¥ì‚¬ë¬´ì†Œ ë´‰ì‚¬ë‹¨ íŒŒê²¬ ì§€ì› (ìƒí™œë¹„ ì§€ì›).", dept: "ì™¸êµë¶€", important: false },
            { id: 406, title: "ì²­ë…„ì„¸ëŒ€ ë§ì¶¤í˜• ê³ ì¶©í•´ì†Œ", category: "ìƒí™œ/ë³µì§€", startDate: "2025-01-01", endDate: "2025-12-31", target: ["ì „ì²´"], desc: "ì°¾ì•„ê°€ëŠ” ê³ ì¶© í•´ê²°(ë‹¬ë¦¬ëŠ” êµ­ë¯¼ì‹ ë¬¸ê³ ) ë° ì²­ë…„ ê³ ì¶© ìœ ë°œìš”ì¸ í•´ì†Œ.", dept: "êµ­ë¯¼ê¶Œìµìœ„ì›íšŒ", important: false }
        ];

        // --- 2. ì „ì—­ ìƒíƒœ ë° DOM ì°¸ì¡° ---
        let state = {
            currentView: 'dashboard',
            filters: {
                status: 'ì „ì²´',
                category: 'ì „ì²´'
            }
        };
        
        let categoryChart = null;
        // ë°ëª¨ë¥¼ ìœ„í•´ ì˜¤ëŠ˜ ë‚ ì§œë¥¼ 2025ë…„ 3ì›” 10ì¼ë¡œ ê°€ì • (ì‚¬ìš©ìê°€ ë³¼ ë•Œ í™œì„±í™”ëœ ëŠë‚Œì„ ì£¼ê¸° ìœ„í•¨)
        const demoToday = new Date("2025-03-10"); 
        
        const views = {
            dashboard: document.getElementById('view-dashboard'),
            timeline: document.getElementById('view-timeline'),
            list: document.getElementById('view-list')
        };
        
        const navButtons = document.querySelectorAll('.nav-button');
        const filterButtons = document.querySelectorAll('.filter-button');
        const timelineBarsContainer = document.getElementById('timeline-bars');
        const policyListContainer = document.getElementById('policy-list');
        const todayLine = document.getElementById('today-line');
        
        // ëª¨ë‹¬ DOM
        const modal = document.getElementById('modal');
        const modalContent = modal.querySelector('.modal-content');
        
        // --- 3. í—¬í¼ í•¨ìˆ˜ ---

        // ì¹´í…Œê³ ë¦¬ë³„ ìƒ‰ìƒ (Tailwind í´ë˜ìŠ¤)
        const getCategoryColor = (category) => {
            const colors = {
                "ì·¨ì—…/ì§ë¬´": "bg-blue-100 text-blue-700 border-blue-200",
                "êµìœ¡/ì¥í•™": "bg-green-100 text-green-700 border-green-200",
                "ì£¼ê±°/ê¸ˆìœµ": "bg-orange-100 text-orange-700 border-orange-200",
                "ìƒí™œ/ë³µì§€": "bg-purple-100 text-purple-700 border-purple-200"
            };
            return colors[category] || "bg-slate-100 text-slate-700 border-slate-200";
        };
        
        // D-day ë° ìƒíƒœ ê³„ì‚°
        const getStatusInfo = (startDate, endDate) => {
            const start = new Date(startDate);
            const end = new Date(endDate);
            const diffTime = end - demoToday;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            if (demoToday < start) {
                const startDiff = Math.ceil((start - demoToday) / (1000 * 60 * 60 * 24));
                return { text: `D-${startDiff} ì˜¤í”ˆì˜ˆì •`, color: "bg-gray-200 text-gray-600" };
            }
            if (demoToday > end) return { text: "ë§ˆê°", color: "bg-red-100 text-red-500" };
            // ìƒì‹œëª¨ì§‘ì€ íŠ¹ë³„ ì·¨ê¸‰
            if (startDate === "2025-01-01" && endDate === "2025-12-31") return { text: "ìƒì‹œëª¨ì§‘", color: "bg-blue-500 text-white" };
            
            if (diffDays <= 15) return { text: `ë§ˆê° D-${diffDays}`, color: "bg-red-500 text-white animate-pulse" };
            return { text: "ì ‘ìˆ˜ì¤‘", color: "bg-green-500 text-white" };
        };

        // íƒ€ì„ë¼ì¸ ìœ„ì¹˜ ê³„ì‚° (2025ë…„ ê¸°ì¤€)
        const calculatePosition = (startStr, endStr) => {
            const yearStart = new Date("2025-01-01").getTime();
            const yearEnd = new Date("2025-12-31").getTime();
            const totalDuration = yearEnd - yearStart;

            const sDate = new Date(startStr).getTime();
            const eDate = new Date(endStr).getTime();

            const safeStart = Math.max(sDate, yearStart);
            const safeEnd = Math.min(eDate, yearEnd);

            const left = ((safeStart - yearStart) / totalDuration) * 100;
            let width = ((safeEnd - safeStart) / totalDuration) * 100;
            
            if (width < 0) width = 0;
            if (left === 0 && width > 100) width = 100; // ê½‰ ì°¬ ë°”
            
            return { left: `${left}%`, width: `${width}%` };
        };
        
        const setTodayLinePosition = () => {
            const pos = calculatePosition(demoToday.toISOString(), demoToday.toISOString());
            todayLine.style.left = pos.left;
        };

        // --- 4. ë°ì´í„° í•„í„°ë§ ---
        const getFilteredData = () => {
            return policies.filter(item => {
                // ë‚´ ìƒíƒœ í•„í„°: 'ì „ì²´'ëŠ” ëª¨ë“  ê²ƒì„ ë³´ì—¬ì£¼ë˜, ì‚¬ìš©ìê°€ 'ì¬í•™ìƒ'ì„ ì„ íƒí•˜ë©´ íƒ€ê²Ÿì— 'ì¬í•™ìƒ' ë˜ëŠ” 'ì „ì²´'ê°€ í¬í•¨ëœ ê²ƒ í‘œì‹œ
                const matchStatus = state.filters.status === 'ì „ì²´' || 
                                    item.target.includes(state.filters.status) || 
                                    item.target.includes('ì „ì²´');
                                    
                const matchCategory = state.filters.category === 'ì „ì²´' || item.category === state.filters.category;
                return matchStatus && matchCategory;
            });
        };

        // --- 5. ë Œë”ë§ í•¨ìˆ˜ ---

        function renderApp() {
            const data = getFilteredData();
            
            Object.values(views).forEach(view => view.classList.add('hidden'));
            views[state.currentView].classList.remove('hidden');

            updateActiveButtons();
            
            renderDashboard(data);
            renderTimeline(data);
            renderList(data);
        }

        function updateActiveButtons() {
            navButtons.forEach(btn => {
                if (btn.dataset.view === state.currentView) {
                    btn.classList.add('bg-white', 'shadow', 'text-blue-600');
                    btn.classList.remove('text-slate-500');
                } else {
                    btn.classList.remove('bg-white', 'shadow', 'text-blue-600');
                    btn.classList.add('text-slate-500');
                }
            });
            
            // í•„í„° ë²„íŠ¼ ìŠ¤íƒ€ì¼ë§ì€ ë³µì¡í•˜ì—¬ data attribute ê¸°ë°˜ìœ¼ë¡œ ë‹¨ìˆœí™”
            document.querySelectorAll('.filter-button').forEach(btn => {
                const group = btn.dataset.filterGroup;
                const value = btn.dataset.filterValue;
                const isActive = state.filters[group] === value;
                
                if (isActive) {
                    if(group === 'status') btn.className = "filter-button status-filter px-3 py-1.5 rounded-full text-sm border transition-colors bg-blue-600 text-white border-blue-600";
                    else btn.className = "filter-button category-filter px-3 py-1.5 rounded-full text-sm border transition-colors bg-slate-800 text-white border-slate-800";
                } else {
                    btn.className = "filter-button px-3 py-1.5 rounded-full text-sm border transition-colors bg-white text-slate-600 border-slate-300 hover:bg-slate-50";
                }
            });
        }

        function renderDashboard(data) {
            document.getElementById('stat-total-text').textContent = policies.length; // ì „ì²´ ë°ì´í„° ìˆ˜

            let availableCount = 0;
            let importantCount = 0;
            const categoryCounts = {};
            
            data.forEach(p => {
                const status = getStatusInfo(p.startDate, p.endDate);
                if (status.text.includes('ì ‘ìˆ˜ì¤‘') || status.text.includes('ìƒì‹œ')) availableCount++;
                if (p.important) importantCount++;
                
                const cat = p.category;
                categoryCounts[cat] = (categoryCounts[cat] || 0) + 1;
            });
            
            document.getElementById('stat-total').textContent = data.length;
            document.getElementById('stat-available').textContent = availableCount;
            document.getElementById('stat-important').textContent = importantCount;

            const ctx = document.getElementById('categoryChart').getContext('2d');
            const chartData = {
                labels: Object.keys(categoryCounts),
                datasets: [{
                    data: Object.values(categoryCounts),
                    backgroundColor: [
                        'rgba(59, 130, 246, 0.7)', 
                        'rgba(249, 115, 22, 0.7)', 
                        'rgba(22, 163, 74, 0.7)', 
                        'rgba(168, 85, 247, 0.7)', 
                        'rgba(100, 116, 139, 0.7)' 
                    ],
                    borderColor: '#fff',
                    borderWidth: 2
                }]
            };

            if (categoryChart) {
                categoryChart.destroy();
            }
            
            categoryChart = new Chart(ctx, {
                type: 'doughnut',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) label += ': ';
                                    if (context.parsed !== null) label += context.parsed + 'ê±´';
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        function renderTimeline(data) {
            timelineBarsContainer.innerHTML = '';
            if (data.length === 0) {
                timelineBarsContainer.innerHTML = '<div class="text-center py-20 text-slate-400">í•´ë‹¹í•˜ëŠ” ì •ì±…ì´ ì—†ìŠµë‹ˆë‹¤. í•„í„°ë¥¼ ë³€ê²½í•´ë³´ì„¸ìš”.</div>';
                timelineBarsContainer.style.height = 'auto';
                return;
            }

            // ì¹´í…Œê³ ë¦¬ë³„ ì •ë ¬í•˜ì—¬ íƒ€ì„ë¼ì¸ ë³´ê¸° ì¢‹ê²Œ
            const sortedData = [...data].sort((a,b) => a.category.localeCompare(b.category));

            sortedData.forEach((policy, index) => {
                const pos = calculatePosition(policy.startDate, policy.endDate);
                const colorClass = getCategoryColor(policy.category);
                
                const bar = document.createElement('div');
                bar.className = `absolute h-7 rounded shadow-sm border cursor-pointer hover:ring-2 hover:ring-offset-1 ring-blue-400 transition-all flex items-center px-2 truncate ${colorClass} ${policy.important ? 'ring-2 ring-red-400' : ''}`;
                bar.style.left = pos.left;
                bar.style.width = pos.width;
                bar.style.top = `${index * (2.75)}rem`;
                bar.style.minWidth = '40px';
                bar.onclick = () => openModal(policy.id);
                
                bar.innerHTML = `
                    ${policy.important ? '<span class="text-red-500 text-[10px] mr-1">â˜…</span>' : ''}
                    <span class="text-xs font-bold truncate">${policy.title}</span>
                `;
                timelineBarsContainer.appendChild(bar);
            });
            timelineBarsContainer.style.height = `${sortedData.length * 2.75 + 4}rem`;
        }

        function renderList(data) {
            policyListContainer.innerHTML = '';
            if (data.length === 0) {
                policyListContainer.innerHTML = '<div class="text-center py-20 text-slate-400 md:col-span-3">í•´ë‹¹í•˜ëŠ” ì •ì±…ì´ ì—†ìŠµë‹ˆë‹¤. í•„í„°ë¥¼ ë³€ê²½í•´ë³´ì„¸ìš”.</div>';
                return;
            }
            
            data.sort((a,b) => b.important - a.important).forEach(policy => {
                const colorClass = getCategoryColor(policy.category);
                const status = getStatusInfo(policy.startDate, policy.endDate);

                const card = document.createElement('div');
                card.className = "bg-white p-5 rounded-xl shadow-sm border hover:border-blue-300 transition-colors cursor-pointer group flex flex-col h-full relative";
                if(policy.important) card.classList.add("ring-1", "ring-purple-200");
                
                card.onclick = () => openModal(policy.id);
                
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs px-2 py-1 rounded font-bold ${colorClass}">${policy.category}</span>
                        <span class="text-xs px-2 py-1 rounded font-bold ${status.color}">${status.text}</span>
                    </div>
                    <h3 class="font-bold text-lg text-slate-800 group-hover:text-blue-600 mb-2 leading-snug">
                        ${policy.important ? '<span class="text-purple-500 mr-1">â˜…</span>' : ''}${policy.title}
                    </h3>
                    <p class="text-sm text-slate-500 mb-4 line-clamp-2 flex-grow">${policy.desc}</p>
                    <div class="flex items-center justify-between text-xs text-slate-400 mt-auto pt-3 border-t border-slate-100">
                        <span class="flex items-center gap-1">ğŸ—“ï¸ ${policy.startDate} ~ ${policy.endDate}</span>
                    </div>
                `;
                policyListContainer.appendChild(card);
            });
        }

        // --- 6. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ---
        
        function handleNavClick(e) {
            const button = e.target.closest('.nav-button');
            if (button) {
                state.currentView = button.dataset.view;
                renderApp();
            }
        }
        
        function handleFilterClick(e) {
            const button = e.target.closest('.filter-button');
            if (button) {
                const group = button.dataset.filterGroup;
                const value = button.dataset.filterValue;
                state.filters[group] = value;
                renderApp();
            }
        }
        
        function openModal(policyId) {
            const policy = policies.find(p => p.id == policyId);
            if (!policy) return;
            
            const status = getStatusInfo(policy.startDate, policy.endDate);
            
            document.getElementById('modal-title').textContent = policy.title;
            document.getElementById('modal-desc').textContent = policy.desc;
            document.getElementById('modal-target').textContent = policy.target.join(', ');
            document.getElementById('modal-period').textContent = `${policy.startDate} ~ ${policy.endDate}`;
            document.getElementById('modal-dept').textContent = policy.dept;
            document.getElementById('modal-link').href = "#"; // ì‹¤ì œ ë§í¬ê°€ ìˆë‹¤ë©´ policy.link
            
            const categorySpan = document.getElementById('modal-category');
            categorySpan.textContent = policy.category;
            categorySpan.className = `text-xs px-2 py-1 rounded font-bold ${getCategoryColor(policy.category)}`;
            
            const ddaySpan = document.getElementById('modal-dday');
            ddaySpan.textContent = status.text;
            ddaySpan.className = `text-xs px-2 py-1 rounded font-bold ${status.color}`;
            
            modal.classList.remove('opacity-0', 'invisible');
            modalContent.classList.remove('scale-95');
        }
        
        function closeModal() {
            modal.classList.add('opacity-0', 'invisible');
            modalContent.classList.add('scale-95');
        }

        function init() {
            document.addEventListener('click', (e) => {
                handleNavClick(e);
                handleFilterClick(e);
            });
            
            setTodayLinePosition();
            renderApp();
        }

        document.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>